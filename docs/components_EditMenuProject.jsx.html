<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>components/EditMenuProject.jsx - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Components.html">Components</a><ul class='methods'><li data-type='method'><a href="module-Components.html#~Board">Board</a></li><li data-type='method'><a href="module-Components.html#~BoardTask">BoardTask</a></li><li data-type='method'><a href="module-Components.html#~EditMenuProject">EditMenuProject</a></li><li data-type='method'><a href="module-Components.html#~Footer">Footer</a></li><li data-type='method'><a href="module-Components.html#~Header">Header</a></li><li data-type='method'><a href="module-Components.html#~Panel">Panel</a></li><li data-type='method'><a href="module-Components.html#~PanelTarea">PanelTarea</a></li><li data-type='method'><a href="module-Components.html#~TaskMenuEdit">TaskMenuEdit</a></li><li data-type='method'><a href="module-Components.html#~TeamMenu">TeamMenu</a></li></ul></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li><a href="module-Config.html">Config</a><ul class='methods'><li data-type='method'><a href="module-Config.html#~clearProject">clearProject</a></li><li data-type='method'><a href="module-Config.html#~clearTask">clearTask</a></li><li data-type='method'><a href="module-Config.html#~clearUser">clearUser</a></li><li data-type='method'><a href="module-Config.html#~setActualProjects">setActualProjects</a></li><li data-type='method'><a href="module-Config.html#~setCompletedProjects">setCompletedProjects</a></li><li data-type='method'><a href="module-Config.html#~setDoneTasks">setDoneTasks</a></li><li data-type='method'><a href="module-Config.html#~setInProgressTasks">setInProgressTasks</a></li><li data-type='method'><a href="module-Config.html#~setIsLoading">setIsLoading</a></li><li data-type='method'><a href="module-Config.html#~setLoading">setLoading</a></li><li data-type='method'><a href="module-Config.html#~setLoading">setLoading</a></li><li data-type='method'><a href="module-Config.html#~setProject">setProject</a></li><li data-type='method'><a href="module-Config.html#~setTask">setTask</a></li><li data-type='method'><a href="module-Config.html#~setToReviewTasks">setToReviewTasks</a></li><li data-type='method'><a href="module-Config.html#~setTodoTasks">setTodoTasks</a></li><li data-type='method'><a href="module-Config.html#~setUser">setUser</a></li></ul></li><li></li><li></li><li></li><li><a href="module-Contexts.html">Contexts</a></li><li></li><li><a href="module-Hooks.html">Hooks</a></li><li><a href="module-Layouts.html">Layouts</a><ul class='methods'><li data-type='method'><a href="module-Layouts.html#~LayoutAuth">LayoutAuth</a></li><li data-type='method'><a href="module-Layouts.html#~LayoutPrivate">LayoutPrivate</a></li><li data-type='method'><a href="module-Layouts.html#~LayoutPublic">LayoutPublic</a></li></ul></li><li></li><li></li><li><a href="module-Modals.html">Modals</a><ul class='methods'><li data-type='method'><a href="module-Modals.html#~ConfirmModal">ConfirmModal</a></li><li data-type='method'><a href="module-Modals.html#~FormModal">FormModal</a></li><li data-type='method'><a href="module-Modals.html#~Modal">Modal</a></li></ul></li><li></li><li></li><li><a href="module-Pages.html">Pages</a><ul class='methods'><li data-type='method'><a href="module-Pages.html#~ContactUs">ContactUs</a></li><li data-type='method'><a href="module-Pages.html#~FormUserProfile">FormUserProfile</a></li><li data-type='method'><a href="module-Pages.html#~Home">Home</a></li><li data-type='method'><a href="module-Pages.html#~Login">Login</a></li><li data-type='method'><a href="module-Pages.html#~NotFound">NotFound</a></li><li data-type='method'><a href="module-Pages.html#~ProyectInfo">ProyectInfo</a></li><li data-type='method'><a href="module-Pages.html#~Register">Register</a></li><li data-type='method'><a href="module-Pages.html#~UserProfile">UserProfile</a></li></ul></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li><a href="module-Router.html">Router</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">components/EditMenuProject.jsx</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module Components
 * @category UI
 */
import React, { useEffect, useState } from "react";
import AddIcon from "@mui/icons-material/Add";
import PersonAddAlt1Icon from "@mui/icons-material/PersonAddAlt1";
import BorderColorIcon from "@mui/icons-material/BorderColor";
import DeleteForeverIcon from "@mui/icons-material/DeleteForever";
import fotoCambiar from "../assets/margarita.png";
import AddPhotoAlternateIcon from "@mui/icons-material/AddPhotoAlternate";
import { brown } from "@mui/material/colors";
import FormModal from "../modals/FormModal.jsx";
import * as Yup from "yup";
import ConfirmModal from "../modals/ConfirmModal.jsx";
import { useAddCollaboratorStore } from "../config/addCollaboratorStore.jsx";

/**
 * Componente de menú de edición para proyectos.
 * Proporciona botones para añadir, editar y eliminar proyectos, así como para añadir personas.
 *
 * @component
 * @param {Object} props - Propiedades del componente
 * @param {string} props.id - Identificador único del proyecto
 * @param {function} props.onAddTask - Función para añadir una nueva tarea
 * @param {function} props.onAddPerson - Función para añadir un colaborador al proyecto
 * @param {function} props.onEditProject - Función para editar el proyecto
 * @param {function} props.onDeleteProject - Función para eliminar el proyecto
 * @returns {JSX.Element} Componente EditMenuProject renderizado
 */
const EditMenuProject = ({
  id,
  onAddTask,
  onAddPerson,
  onEditProject,
  onDeleteProject,
}) => {
  const [modalNewTaskOpen, setmodalNewTaskOpen] = useState(false);
  const [modalAddColaboratorOpen, setmodalAddColaboratorOpen] = useState(false);
  const [modalEditProjectOpen, setmodalEditProjectOpen] = useState(false);
  const [modalDeleteProjectOpen, setmodalDeleteProjectOpen] = useState(false);
  const { error, clearError, setCollaboratorAdded, collaboratorAdded } =
    useAddCollaboratorStore();

  const validationSchemaNewTask = Yup.object().shape({
    name: Yup.string()
      .trim()
      .required("El campo 'Nombre proyecto' es obligatorio"),
    asigned: Yup.string()
      .trim()
      .required("El campo 'Asigando a' es obligatorio"),
    dateEnd: Yup.date()
      .required("El campo 'Fecha' es obligatorio")
      .min(new Date(), "La fecha debe ser posterior a la actual"),
    description: Yup.string()
      .trim()
      .required("El campo 'Descripción' es obligatorio."),
  });

  const validationSchemaAddColaborator = Yup.object().shape({
    email: Yup.string().trim().required("El campo 'Email' es obligatorio"),
  });

  const validationSchemaEditProject = Yup.object().shape({
    name: Yup.string()
      .trim()
      .required("El campo 'Nombre proyecto' es obligatorio"),
    description: Yup.string()
      .trim()
      .required("El campo 'Descripción' es obligatorio."),
    dateIni: Yup.date()
      .required("El campo 'Fecha' es obligatorio")
      .min(new Date(), "La fecha debe ser posterior a la actual"),
    dateEnd: Yup.date()
      .required("El campo 'Fecha' es obligatorio")
      .min(new Date(), "La fecha debe ser posterior a la actual"),
  });

  return (
    &lt;div className="edit__menu">
      &lt;button
        className="menu__button"
        title="Añadir tarea"
        onClick={() => setmodalNewTaskOpen(true)}
      >
        &lt;AddIcon />
      &lt;/button>
      &lt;button
        className="menu__button"
        title="Añadir colaborador"
        onClick={() => {
          setmodalAddColaboratorOpen(true);
          clearError();
        }}
      >
        &lt;PersonAddAlt1Icon />
      &lt;/button>
      &lt;button
        className="menu__button"
        title="Editar Proyecto"
        onClick={() => setmodalEditProjectOpen(true)}
      >
        &lt;BorderColorIcon />
      &lt;/button>
      &lt;button
        className="menu__button"
        title="Eliminar Proyecto"
        onClick={() => setmodalDeleteProjectOpen(true)}
      >
        &lt;DeleteForeverIcon />
      &lt;/button>

      {/* Modal para añadir tareas al proyecto */}
      &lt;FormModal
        isOpen={modalNewTaskOpen}
        onClose={() => setmodalNewTaskOpen(false)}
        initialValues={{
          name: "",
          asigned: "",
          dateEnd: "",
          priority: "",
          description: "",
        }}
        validationSchema={validationSchemaNewTask}
        onSubmit=":)"
        title="Añadir tarea"
      >
        {({ values, handleChange, handleBlur, errors, touched }) => (
          &lt;>
            &lt;label htmlFor="name" className="formulario__label">
              Nombre tarea
              &lt;input
                type="text"
                name="name"
                value={values.name}
                onChange={handleChange}
                onBlur={handleBlur}
                className="formulario__input"
              />
              {errors.name &amp;&amp; touched.name &amp;&amp; (
                &lt;p className="formulario__error">* {errors.name}&lt;/p>
              )}
            &lt;/label>

            &lt;label htmlFor="asigned" className="formulario__label">
              Asignado a
              &lt;select
                id="asigned"
                name="asigned"
                value={values.asigned}
                onChange={handleChange}
                onBlur={handleBlur}
                className="formulario__input"
              >
                &lt;option value="" disabled selected>
                  Selecciona una opción
                &lt;/option>
                &lt;option value="No">No&lt;/option>
                &lt;option value="cuentes">cuentes&lt;/option>
                &lt;option value="con">con&lt;/option>
                &lt;option value="migo">migo&lt;/option>
              &lt;/select>
              {errors.asigned &amp;&amp; touched.asigned &amp;&amp; (
                &lt;p className="formulario__error">* {errors.asigned}&lt;/p>
              )}
            &lt;/label>

            &lt;label htmlFor="priority" className="formulario__label">
              Prioridad
              &lt;select
                id="priority"
                name="priority"
                value={values.priority}
                onChange={handleChange}
                onBlur={handleBlur}
                className="formulario__input"
              >
                &lt;option value="baja">Baja&lt;/option>
                &lt;option value="media">Media&lt;/option>
                &lt;option value="alta">Alta&lt;/option>
              &lt;/select>
              {errors.priority &amp;&amp; touched.priority &amp;&amp; (
                &lt;p className="formulario__error">* {errors.priority}&lt;/p>
              )}
            &lt;/label>

            &lt;label htmlFor="dateEnd" className="formulario__label">
              Fecha limite
              &lt;input
                type="date"
                name="dateEnd"
                value={values.dateEnd}
                onChange={handleChange}
                onBlur={handleBlur}
                className="formulario__input"
              />
              {errors.dateEnd &amp;&amp; touched.dateEnd &amp;&amp; (
                &lt;p className="formulario__error">* {errors.dateEnd}&lt;/p>
              )}
            &lt;/label>

            &lt;label htmlFor="description" className="formulario__label">
              Descripción
              &lt;textarea
                name="description"
                value={values.description}
                onChange={handleChange}
                onBlur={handleBlur}
                className="formulario__input"
              />
              {errors.description &amp;&amp; touched.description &amp;&amp; (
                &lt;p className="formulario__error">* {errors.description}&lt;/p>
              )}
            &lt;/label>
          &lt;/>
        )}
      &lt;/FormModal>

      {/* Modal para añadir colaboradores al proyecto */}
      &lt;FormModal
        isOpen={modalAddColaboratorOpen}
        onClose={() => setmodalAddColaboratorOpen(false)}
        initialValues={{
          email: "",
        }}
        validationSchema={validationSchemaAddColaborator}
        onSubmit={(values, { setSubmitting }) => {
          onAddPerson(values.email);
          setSubmitting(false);
        }}
        title="Añadir colaborador"
      >
        {({
          values,
          handleChange: originalHandleChange,
          handleBlur,
          errors,
          touched,
        }) => {
          const handleChange = (e) => {
            clearError();
            setCollaboratorAdded(false);
            originalHandleChange(e);
          };

          useEffect(() => {
            if (error === null &amp;&amp; collaboratorAdded) {
              setmodalAddColaboratorOpen(false);
            }
          }, [error]);

          return (
            &lt;>
              &lt;label htmlFor="email" className="formulario__label">
                Email
                &lt;input
                  type="text"
                  name="email"
                  value={values.email}
                  onChange={handleChange}
                  onBlur={handleBlur}
                  className="formulario__input"
                />
                {errors.email &amp;&amp; touched.email &amp;&amp; (
                  &lt;p className="formulario__error">* {errors.email}&lt;/p>
                )}
                {error !== null &amp;&amp; &lt;p className="formulario__error">{error}&lt;/p>}
              &lt;/label>
            &lt;/>
          );
        }}
      &lt;/FormModal>

      {/* Modal para editar los datos del proyecto */}
      &lt;FormModal
        isOpen={modalEditProjectOpen}
        onClose={() => setmodalEditProjectOpen(false)}
        initialValues={{
          name: "",
          dateIni: "",
          dateEnd: "",
          description: "",
        }}
        validationSchema={validationSchemaEditProject}
        onSubmit={(values) => {
          setmodalEditProjectOpen(false);
        }}
        title="Editar proyecto"
      >
        {({ values, handleChange, handleBlur, errors, touched }) => (
          &lt;>
            &lt;label htmlFor="name" className="formulario__label">
              Nombre proyecto
              &lt;input
                type="text"
                name="name"
                value={values.name}
                onChange={handleChange}
                onBlur={handleBlur}
                className="formulario__input"
              />
              {errors.name &amp;&amp; touched.name &amp;&amp; (
                &lt;p className="formulario__error">* {errors.name}&lt;/p>
              )}
            &lt;/label>

            &lt;label htmlFor="dateIni" className="formulario__label">
              Fecha inicio
              &lt;input
                type="date"
                name="dateIni"
                value={values.dateIni}
                onChange={handleChange}
                onBlur={handleBlur}
                className="formulario__input"
              />
              {errors.dateIni &amp;&amp; touched.dateIni &amp;&amp; (
                &lt;p className="formulario__error">* {errors.dateIni}&lt;/p>
              )}
            &lt;/label>

            &lt;label htmlFor="dateEnd" className="formulario__label">
              Fecha fin
              &lt;input
                type="date"
                name="dateEnd"
                value={values.dateEnd}
                onChange={handleChange}
                onBlur={handleBlur}
                className="formulario__input"
              />
              {errors.dateEnd &amp;&amp; touched.dateEnd &amp;&amp; (
                &lt;p className="formulario__error">* {errors.dateEnd}&lt;/p>
              )}
            &lt;/label>

            &lt;label htmlFor="description" className="formulario__label">
              Descripción
              &lt;textarea
                name="description"
                value={values.description}
                onChange={handleChange}
                onBlur={handleBlur}
                className="formulario__input"
              />
              {errors.description &amp;&amp; touched.description &amp;&amp; (
                &lt;p className="formulario__error">* {errors.description}&lt;/p>
              )}
            &lt;/label>
          &lt;/>
        )}
      &lt;/FormModal>

      {/* Modal para confirmar si el usuario quiere eliminar el proyecto */}
      &lt;ConfirmModal
        isOpen={modalDeleteProjectOpen}
        onClose={() => setmodalDeleteProjectOpen(false)}
        message="¿Estas seguro de que quieres eliminar el proyecto?"
        onConfirm={() => {
          setmodalDeleteProjectOpen(false);

          onDeleteProject(id);
        }}
      />
    &lt;/div>
  );
};

export default EditMenuProject;

/**
 * Ejemplo de uso del componente EditMenuProject:
 *
 * import React from 'react'
 * import EditMenuProject from './EditMenuProject'
 *
 * const App = () => {
 *   const handleAddProject = (id) => {
 *     console.log(`Añadir proyecto ${id}`);
 *     // Lógica para añadir proyecto
 *   }
 *
 *   const handleAddPerson = (id) => {
 *     console.log(`Añadir persona al proyecto ${id}`);
 *     // Lógica para añadir persona
 *   }
 *
 *   const handleEditProject = (id) => {
 *     console.log(`Editar proyecto ${id}`);
 *     // Lógica para editar proyecto
 *   }
 *
 *   const handleDeleteProject = (id) => {
 *     console.log(`Eliminar proyecto ${id}`);
 *     // Lógica para eliminar proyecto
 *   }
 *
 *   return (
 *     &lt;div>
 *       &lt;EditMenuProject
 *         id="proyecto1"
 *         onAddProject={handleAddProject}
 *         onAddPerson={handleAddPerson}
 *         onEditProject={handleEditProject}
 *         onDeleteProject={handleDeleteProject}
 *       />
 *     &lt;/div>
 *   )
 * }
 *
 * export default App
 */
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Tue Jan 28 2025 14:06:48 GMT+0100 (hora estándar de Europa central) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
